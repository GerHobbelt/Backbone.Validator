<!DOCTYPE html>  <html> <head>   <title>backbone.validator.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               backbone.validator.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p>Backbone.Validator v0.92</p>

<p>Copyright (C) 2012 Broadcastr
Author: Todd Kennedy <a href="&#x6D;&#97;&#105;&#108;&#116;&#111;:t&#111;&#100;&#100;&#x40;b&#x72;&#x6F;a&#x64;&#99;&#x61;&#115;&#116;r&#x2E;&#x63;&#111;&#x6D;">t&#111;&#100;&#100;&#x40;b&#x72;&#x6F;a&#x64;&#99;&#x61;&#115;&#116;r&#x2E;&#x63;&#111;&#x6D;</a>
Distributed under MIT License</p>

<p>Documentation and full license available at:
http://toddself.github.com/backbone.validator</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">Backbone</span><span class="p">.</span><span class="nx">Validator</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">get_validators</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">model</span><span class="p">,</span> <span class="nx">attr</span><span class="p">){</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>we want to gather all the validators that are present for this attribute</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">validators</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">v</span><span class="p">;</span>
        <span class="nx">_</span><span class="p">(</span><span class="nx">model</span><span class="p">.</span><span class="nx">validators</span><span class="p">[</span><span class="nx">attr</span><span class="p">]).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">key</span><span class="p">){</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>custom functions just get pushed into the validators list</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">if</span><span class="p">(</span><span class="nx">key</span> <span class="o">===</span> <span class="s1">&#39;fn&#39;</span><span class="p">){</span>
                <span class="nx">v</span> <span class="o">=</span> <span class="p">{</span><span class="nx">fn</span><span class="o">:</span> <span class="nx">model</span><span class="p">.</span><span class="nx">validators</span><span class="p">[</span><span class="nx">attr</span><span class="p">].</span><span class="nx">fn</span><span class="p">,</span> <span class="nx">opt</span><span class="o">:</span> <span class="kc">null</span><span class="p">};</span>
                <span class="nx">validators</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">v</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>and we'll see if the other validators are preset</p>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="k">if</span><span class="p">(</span><span class="nx">key</span> <span class="k">in</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Validator</span><span class="p">.</span><span class="nx">testers</span><span class="p">){</span>
                    <span class="nx">v</span> <span class="o">=</span> <span class="p">{</span><span class="nx">fn</span><span class="o">:</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Validator</span><span class="p">.</span><span class="nx">testers</span><span class="p">[</span><span class="nx">key</span><span class="p">],</span> <span class="nx">opt</span><span class="o">:</span> <span class="nx">model</span><span class="p">.</span><span class="nx">validators</span><span class="p">[</span><span class="nx">attr</span><span class="p">][</span><span class="nx">key</span><span class="p">]};</span>
                    <span class="nx">validators</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">v</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
            
        <span class="p">});</span>
        <span class="k">return</span> <span class="nx">validators</span><span class="p">;</span>
    <span class="p">};</span>
    
    <span class="kd">var</span> <span class="nx">run_validators</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">validators</span><span class="p">,</span> <span class="nx">attribute</span><span class="p">){</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>call each validator in the order in which it was attached to the attribute
should an error be returned, we'll capture it and store it</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">errors</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="nx">_</span><span class="p">(</span><span class="nx">validators</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">validator</span><span class="p">){</span>
            <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">validator</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">validator</span><span class="p">.</span><span class="nx">opt</span><span class="p">,</span> <span class="nx">attribute</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">_</span><span class="p">.</span><span class="nx">isUndefined</span><span class="p">(</span><span class="nx">result</span><span class="p">)){</span>
                <span class="nx">errors</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="nx">errors</span><span class="p">;</span>
    <span class="p">};</span>
    
    <span class="kd">var</span> <span class="nx">set_default</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">model</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">errors</span><span class="p">,</span> <span class="nx">model_validators</span><span class="p">){</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>if the validation fails and the user wants to use the default that's been defined
we'll do that here.  We have to set {silent: true} to prevent a recursive call
from being made.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">model</span><span class="p">.</span><span class="nx">defaults</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">attr</span> <span class="k">in</span> <span class="nx">model</span><span class="p">.</span><span class="nx">defaults</span><span class="p">)){</span>
            <span class="kd">var</span> <span class="nx">default_errors</span> <span class="o">=</span> <span class="nx">run_validators</span><span class="p">(</span><span class="nx">model</span><span class="p">.</span><span class="nx">defaults</span><span class="p">[</span><span class="nx">attr</span><span class="p">],</span> <span class="nx">model_validators</span><span class="p">,</span> <span class="nx">attr</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">default_errors</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">){</span>
                <span class="nx">model</span><span class="p">.</span><span class="nx">attributes</span><span class="p">[</span><span class="nx">attr</span><span class="p">]</span> <span class="o">=</span> <span class="nx">model</span><span class="p">.</span><span class="nx">defaults</span><span class="p">[</span><span class="nx">attr</span><span class="p">];</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">errors</span> <span class="o">=</span> <span class="nx">errors</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">default_errors</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="nx">model</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="nx">model</span><span class="p">,</span> <span class="nx">errors</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">errors</span><span class="p">;</span>
    <span class="p">};</span>
    </pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>we only want to bother with attributes that have changed so we don't 
revalidate valid data OR invalidate data that was passed in during
instantiation to get around model validation.  that sounds dumb, but
it might be necessary</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">get_changed_attributes</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">previous</span><span class="p">,</span> <span class="nx">current</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">changedAttributes</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="nx">_</span><span class="p">(</span><span class="nx">current</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">key</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">_</span><span class="p">(</span><span class="nx">previous</span><span class="p">).</span><span class="nx">has</span><span class="p">(</span><span class="nx">key</span><span class="p">)){</span>
                <span class="nx">changedAttributes</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">_</span><span class="p">.</span><span class="nx">isEqual</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">previous</span><span class="p">[</span><span class="nx">key</span><span class="p">])){</span>
                <span class="nx">changedAttributes</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="nx">changedAttributes</span><span class="p">;</span>
    <span class="p">};</span>
    
    <span class="k">return</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>extend the model with these values.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">use_defaults</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        
        <span class="nx">validate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">attrs</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">errors</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">model</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">changedAttributes</span> <span class="o">=</span> <span class="nx">get_changed_attributes</span><span class="p">(</span><span class="nx">model</span><span class="p">.</span><span class="nx">previousAttributes</span><span class="p">(),</span> <span class="nx">attrs</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">model</span><span class="p">.</span><span class="nx">validators</span><span class="p">)){</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>for each attribute changed...</p>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="nx">_</span><span class="p">(</span><span class="nx">changedAttributes</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">attr</span><span class="p">){</span>
                    <span class="k">if</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">model</span><span class="p">.</span><span class="nx">validators</span><span class="p">[</span><span class="nx">attr</span><span class="p">])){</span>
                        <span class="kd">var</span> <span class="nx">model_validators</span> <span class="o">=</span> <span class="nx">get_validators</span><span class="p">(</span><span class="nx">model</span><span class="p">,</span> <span class="nx">attr</span><span class="p">);</span>
                        <span class="nx">errors</span> <span class="o">=</span> <span class="nx">run_validators</span><span class="p">(</span><span class="nx">attrs</span><span class="p">[</span><span class="nx">attr</span><span class="p">],</span> <span class="nx">model_validators</span><span class="p">,</span> <span class="nx">attr</span><span class="p">);</span>
                        <span class="k">if</span><span class="p">(</span><span class="nx">errors</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span>  
                            <span class="k">if</span><span class="p">(</span><span class="nx">model</span><span class="p">.</span><span class="nx">use_defaults</span> <span class="o">||</span> <span class="nx">attrs</span><span class="p">.</span><span class="nx">use_defaults</span><span class="p">){</span>
                                <span class="nx">set_default</span><span class="p">(</span><span class="nx">model</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">errors</span><span class="p">,</span> <span class="nx">model_validators</span><span class="p">);</span>                         
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>  
                <span class="p">});</span>             
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">errors</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">errors</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span>
                <span class="k">return</span> <span class="nx">errors</span><span class="p">;</span>                
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">};</span>
<span class="p">}());</span>

<span class="nx">Backbone</span><span class="p">.</span><span class="nx">Validator</span><span class="p">.</span><span class="nx">testers</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(){</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>borrowed from https://github.com/thedersen/backbone.validation</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">format</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">text</span> <span class="o">=</span> <span class="nx">args</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
        <span class="k">return</span> <span class="nx">text</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\{(\d+)\}/g</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">match</span><span class="p">,</span> <span class="nx">number</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="k">typeof</span> <span class="o">!</span><span class="nx">_</span><span class="p">.</span><span class="nx">isUndefined</span><span class="p">(</span><span class="nx">args</span><span class="p">[</span><span class="nx">number</span><span class="p">])</span> <span class="o">?</span> <span class="nx">args</span><span class="p">[</span><span class="nx">number</span><span class="p">]</span> <span class="o">:</span> <span class="nx">match</span><span class="p">;</span>
        <span class="p">});</span>
    <span class="p">};</span>
    
    <span class="k">return</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>is the value in a given range</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">range</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">range</span><span class="p">,</span> <span class="nx">attribute</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">range</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">range</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">2</span><span class="p">){</span>
                <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">_</span><span class="p">.</span><span class="nx">isNumber</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">value</span> <span class="o">&lt;</span> <span class="nx">range</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">||</span> <span class="p">(</span><span class="nx">value</span> <span class="o">&gt;</span> <span class="nx">range</span><span class="p">[</span><span class="mi">1</span><span class="p">])){</span>
                    <span class="k">return</span> <span class="nx">format</span><span class="p">(</span><span class="s1">&#39;{0} is not within the range {1} - {2} for {3}&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">range</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">attribute</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>if type is date we'll do something different.
also, (Since <code>_.isDate</code> returns true for invalid dates)[https://github.com/documentcloud/underscore/pull/489] means we're not going to use _.isDate</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">is_type</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">attribute</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;date&#39;</span><span class="p">){</span>
                <span class="k">if</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">valueOf</span><span class="p">())</span> <span class="o">||</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">!==</span> <span class="s1">&#39;[object Date]&#39;</span><span class="p">){</span>
                    <span class="k">return</span> <span class="nx">format</span><span class="p">(</span><span class="s2">&quot;Expected {0} to be a valid date for {1}&quot;</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">attribute</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">!==</span> <span class="nx">type</span><span class="p">){</span>
                    <span class="k">return</span> <span class="nx">format</span><span class="p">(</span><span class="s2">&quot;Expected {0} to be of type {1} for {2} &quot;</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">attribute</span><span class="p">);</span>
                <span class="p">}</span>
                
            <span class="p">}</span>            
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>does it match the given regex</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">regex</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">re</span><span class="p">,</span> <span class="nx">attribute</span><span class="p">){</span>
            <span class="kd">var</span> <span class="nx">regex</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="nx">re</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">regex</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">value</span><span class="p">)){</span>
                <span class="k">return</span> <span class="nx">format</span><span class="p">(</span><span class="s2">&quot;{0} did not match pattern {1} for {2}&quot;</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">regex</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span> <span class="nx">attribute</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>is the value in this list</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">in_list</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">list</span><span class="p">,</span> <span class="nx">attribute</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">list</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">_</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">list</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="o">===</span> <span class="o">-</span><span class="mi">1</span><span class="p">){</span>
                <span class="k">return</span> <span class="nx">format</span><span class="p">(</span><span class="s2">&quot;{0} is not part of [{1}] for {2}&quot;</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">list</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">),</span> <span class="nx">attribute</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>is the value a key</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">is_key</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">obj</span><span class="p">,</span> <span class="nx">attribute</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">value</span><span class="p">)){</span>
                <span class="k">return</span> <span class="nx">format</span><span class="p">(</span><span class="s2">&quot;{0} is not one of [{1}] for {2}&quot;</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">_</span><span class="p">(</span><span class="nx">obj</span><span class="p">).</span><span class="nx">keys</span><span class="p">().</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">),</span> <span class="nx">attribute</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>does the value come in under a max?</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">max_length</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">length</span><span class="p">,</span> <span class="nx">attribute</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">_</span><span class="p">.</span><span class="nx">isUndefined</span><span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="nx">length</span><span class="p">)){</span>
                <span class="k">return</span> <span class="nx">format</span><span class="p">(</span><span class="s2">&quot;{0} is longer than {1} for {2} &quot;</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">length</span><span class="p">,</span> <span class="nx">attribute</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>does the value meet a minimum requirement</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">min_length</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">length</span><span class="p">,</span> <span class="nx">attribute</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">_</span><span class="p">.</span><span class="nx">isUndefined</span><span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">)){</span>
                <span class="k">return</span> <span class="nx">format</span><span class="p">(</span><span class="s1">&#39;{0} is shorter than {1} for {2}&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">length</span><span class="p">,</span> <span class="nx">attribute</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>does the value equal a default</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">to_equal</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">example</span><span class="p">,</span> <span class="nx">attribute</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">_</span><span class="p">.</span><span class="nx">isEqual</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">example</span><span class="p">)){</span>
                <span class="k">return</span> <span class="nx">format</span><span class="p">(</span><span class="s2">&quot;{0} is not the same as {1} for {2}&quot;</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">example</span><span class="p">,</span> <span class="nx">attribute</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>is the value at least a number</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">min_value</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">limit</span><span class="p">,</span> <span class="nx">attribute</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">&lt;</span> <span class="nx">limit</span><span class="p">){</span>
                <span class="k">return</span> <span class="nx">format</span><span class="p">(</span><span class="s2">&quot;{0} is smaller than {1} for {2}&quot;</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">limit</span><span class="p">,</span> <span class="nx">attribute</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>does the value exceed a number</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">max_value</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">limit</span><span class="p">,</span> <span class="nx">attribute</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">value</span> <span class="o">&gt;</span> <span class="nx">limit</span><span class="p">){</span>
                <span class="k">return</span> <span class="nx">format</span><span class="p">(</span><span class="s2">&quot;{0} exceeds {1} for {2}&quot;</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">limit</span><span class="p">,</span> <span class="nx">attribute</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">},</span>
        </pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>is this an instance of a particular object</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">is_instance</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">type</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">value</span> <span class="k">instanceof</span> <span class="nx">type</span><span class="p">)){</span>
                <span class="k">return</span> <span class="nx">format</span><span class="p">(</span><span class="s2">&quot;{0} is not an instance of {1}&quot;</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">type</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">};</span>
<span class="p">}());</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 